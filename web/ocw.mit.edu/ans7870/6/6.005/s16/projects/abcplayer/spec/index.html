<!DOCTYPE html>
<html>
 
<!-- Mirrored from ocw.mit.edu/ans7870/6/6.005/s16/projects/abcplayer/spec/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Dec 2025 10:37:22 GMT -->
<head>
  <meta charset="utf-8">
   <title>
    ABC Player Specification
   </title>
   <link href="../../../web/handout-style.css" rel="stylesheet">
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
   </link>
  </meta>
 </head>
 <body>
  <header>
   <a href="../../../index.html">
    6.005 — Software Construction on MIT OpenCourseWare
   </a>
   |
   <a href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-005-software-construction-spring-2016/">
    OCW 6.005 Homepage
   </a>
   <div>
    Spring 2016
   </div>
  </header>
  <nav class="table-of-contents col-sm-2">
   <ul class="nav">
    <li>
     <a href="#abc_player_specification">
      ABC Player Specification
     </a>
    </li>
    <li>
     <a href="#abc">
      The ABC Subset for 6.005
     </a>
    </li>
    <li>
     <a href="#header">
      Header
     </a>
    </li>
    <li>
     <a href="#body">
      Body
     </a>
    </li>
    <li>
     <a href="#multiple_voices">
      Multiple Voices
     </a>
    </li>
   </ul>
  </nav>
  <main class="container-fluid">
   <h1 class="handout-title col-sm-8 col-sm-offset-2" id="abc_player_specification">
    ABC Player Specification
   </h1>
   <div data-outline="abc_player_specification">
    <div class="markdown col-sm-8 col-sm-offset-2 converted">
     <p>
      <code>
       abc.player.Main
      </code>
      should be the entry point of your program, taking an abc music file as a command-line argument.
If you choose a different design instead, then you
      <em>
       must
      </em>
      provide a file called
      <code>
       README.txt
      </code>
      at the top level of your project repository, explaining how a user can run your program and play an abc music file.
     </p>
     <p>
      Running your program on different music files
      <em>
       must not
      </em>
      require editing Java source code.
     </p>
     <p>
      In addition to playing the music on the MIDI synthesizer, your program should print out the abc header information to the console.
     </p>
     <h1 id="abc">
      The ABC Subset for 6.005
     </h1>
     <div data-outline="abc">
      <p>
       This document provides a high-level, but not necessarily comprehensive,
overview of language constructs that your abc player will need to handle. For
information on the exact syntax of abc, you should consult:
      </p>
      <blockquote>
       <p>
        <a href="abc_subset_bnf.txt">
         <strong>
          The abc subset grammar
         </strong>
        </a>
       </p>
      </blockquote>
      <p>
       An abc file consists of two parts: (1) the
       <em>
        header
       </em>
       , which contains
various information about the musical piece, such as its title, composer,
tempo, meter, and note length, and (2) the
       <em>
        body
       </em>
       , which contains a
sequence of notes that make up the musical piece.
      </p>
      <h2 id="header">
       Header
      </h2>
      <div data-outline="header">
       <p>
        Each line in the header corresponds to a
        <em>
         field
        </em>
        , and begins with
a single uppercase letter and a colon (
        <code>
         :
        </code>
        ), followed by the 
content of the field. The following shows an example of what a header 
may look like:
       </p>
       <pre><code>X: 3
T: Turkish March
C: W. Mozart
M: 2/4
L: 1/8
K: Am</code></pre>
       <p>
        According to this header, the title of the piece contained in this
file is
        <code>
         Turkish March
        </code>
        , and was composed by a person named
        <code>
         W. Mozart
        </code>
        . The piece is in A minor (
        <code>
         K: Am
        </code>
        ), and the default
length of each note in the music is one eighth (
        <code>
         L: 1/8
        </code>
        ). Each bar
contains two quarter notes (
        <code>
         M: 2/4
        </code>
        ).
       </p>
       <p>
        The abc standard specifies a large number of fields. You are
  required to handle only the following subset:
       </p>
       <ul>
        <li>
         <strong>
          C:
         </strong>
         Name of the composer.
        </li>
        <li>
         <strong>
          K:
         </strong>
         Key, which determines the
         <a href="#key_signature">
          <em>
           key signature
          </em>
         </a>
         for the piece.
        </li>
        <li>
         <strong>
          L:
         </strong>
         Default length or duration of a note.
        </li>
        <li>
         <strong>
          M:
         </strong>
         Meter. It determines the sum of the durations of all
notes within a bar, expressed as a rational number like
         <code>
          4/4
         </code>
         or
         <code>
          3/8
         </code>
         .  The special meter
         <code>
          C
         </code>
         (“common time”) means
         <code>
          4/4
         </code>
         , and
         <code>
          C|
         </code>
         (“cut common time”) means
         <code>
          2/2
         </code>
         .
        </li>
        <li>
         <strong>
          Q:
         </strong>
         Tempo. It represents the number of beats of the given length to play
per minute.
        </li>
        <li>
         <strong>
          T:
         </strong>
         Title of the piece.
        </li>
        <li>
         <strong>
          X:
         </strong>
         Index number, similar to the track number in a
recording. In this project, this field does not carry any
meaning, as you are required to parse only one abc file at a
time. However, the official standard designates this field to be
mandatory in every abc file, and therefore, your parser must be able at least to read
it (and may then discard it).
        </li>
       </ul>
       <p>
        There are several additional requirements on the header:
       </p>
       <ul>
        <li>
         The first field in the header must be the index number (
         <code>
          X
         </code>
         ).
        </li>
        <li>
         The second field in the header must be the title (
         <code>
          T
         </code>
         ).
        </li>
        <li>
         The last field in the header must be the key (
         <code>
          K
         </code>
         ).
        </li>
        <li>
         Each field in the header occurs on a separate line.
        </li>
       </ul>
       <p>
        All fields other than
        <code>
         X
        </code>
        ,
        <code>
         T
        </code>
        , and
        <code>
         K
        </code>
        are optional, and may appear
in any order.
       </p>
       <ul>
        <li>
         When the field
         <code>
          M
         </code>
         is omitted, the default meter is 4/4.
        </li>
        <li>
         When the field
         <code>
          L
         </code>
         is omitted, a unit note
length is set based on the meter.  If the meter is less than 0.75, the default unit note
length is a sixteenth note.  If the meter is 0.75 or greater, it is an eighth note.
For example, 2/4 = 0.5, so, the default unit note length is a sixteenth note,
while for 4/4 = 1.0, or 6/8 = 0.75, or 3/4= 0.75, it is an eighth note. Notice
that if neither
         <code>
          M
         </code>
         nor
         <code>
          L
         </code>
         fields are present, the default note length is an
eighth.
        </li>
        <li>
         When the field
         <code>
          Q
         </code>
         is omitted, the default tempo is 100 beats per minute, where a beat is the default note length given by field
         <code>
          L
         </code>
         . Notice, however, that when
         <code>
          Q
         </code>
         <strong>
          is
         </strong>
         specified,
it includes its own beat length, and the tempo is not necessarily based on
         <code>
          L
         </code>
         .
        </li>
        <li>
         When the field
         <code>
          C
         </code>
         is omitted, any reasonable string
will suffice (e.g.
         <code>
          Unknown
         </code>
         ).
        </li>
       </ul>
       <h3 id="key_signature">
        Key Signature
       </h3>
       <div data-outline="key_signature">
        <div style="margin: 1em; float: right; text-align: center;">
         <img src="key_signature.png" width="100"/>
        </div>
        <p>
         A key signature is a set of
sharps or flats associated with particular notes in the scale. A
         <em>
          sharp
         </em>
         causes every occurrence of that note to be played one semitone
         <strong>
          higher
         </strong>
         , and a
         <em>
          flat
         </em>
         causes every occurrence of that note
to be played one semitone
         <strong>
          lower
         </strong>
         . For example, the key signature in the diagram shown on
the right contains three sharps (placed on C, F, and G). Throughout
the piece, every C, F or, G (irrespective of the octave) should
be played one semitone higher. A key of either A major (denoted
         <code>
          K:A
         </code>
         )
or F-sharp minor (denoted
         <code>
          K:F#m
         </code>
         ) specifies these three sharps.
        </p>
        <p>
         Your abc player should handle every major and minor key on
         <a href="http://en.wikipedia.org/wiki/Key_signature">
          this list of keys and their signatures
         </a>
         .
You should also note that the effect of the key signature can be
temporarily overridden with an
         <em>
          accidental
         </em>
         , which 
appears immediately left of its target note. Accidentals are described
in
         <a href="#accidentals">
          <em>
           Body: Accidentals
          </em>
         </a>
         .
        </p>
       </div>
      </div>
      <h2 id="body">
       Body
      </h2>
      <div data-outline="body">
       <h3 id="notes">
        Notes
       </h3>
       <div data-outline="notes">
        <p>
         The body of an abc file consists of a sequence of notes separated by
bar lines. Middle C is denoted by
        </p>
        <pre><code>C</code></pre>
        <p>
         and the scale of C in this octave is represented by the sequence
        </p>
        <pre><code>CDEFGAB</code></pre>
        <p>
         The note C in the next higher octave is denoted by a lower case C
        </p>
        <pre><code>c</code></pre>
        <p>
         Therefore, the sequence of notes that represents the scale of C twice, going
through two octaves, and 
starting with middle C is
        </p>
        <pre><code>CDEFGABcdefgab</code></pre>
        <p>
         Notes in the higher octave are denoted by appending an appropriate
number of apostrophes (
         <code>
          '
         </code>
         ) immediately after their names. For example,
        </p>
        <pre><code>c'</code></pre>
        <p>
         represents C in the two octaves up from the middle C, and
        </p>
        <pre><code>c''</code></pre>
        <p>
         represents C in the three octaves up. Similarly, notes in the octaves
below the middle C can be denoted by appending commas (
         <code>
          ,
         </code>
         ).
        </p>
        <p>
         A bar line separates a sequence of notes into segments and is denoted by
         <code>
          |
         </code>
         . A double bar line (
         <code>
          [|
         </code>
         ,
         <code>
          ||
         </code>
         , or
         <code>
          |]
         </code>
         ) indicates the end of a major
section in the music. There are also repeat lines (e.g.
         <code>
          |:
         </code>
         ), which
are described in
         <a href="#repeats">
          <em>
           Body: Repeats
          </em>
         </a>
         .
        </p>
        <p>
         As a summarizing example, the following sequence of notes
        </p>
        <img height="90" src="simple_octaves.png">
         <p>
          may be represented by
         </p>
         <pre><code>C, D, E, F,|G, A, B, C|D E F G|A B c d|e f g a|b c' d' e'|f' g' a' b'|]</code></pre>
        </img>
       </div>
       <h3 id="note_lengths">
        Note Lengths
       </h3>
       <div data-outline="note_lengths">
        <p>
         By default, every note has the length specified in the
         <code>
          L
         </code>
         header
  field (and when this field is absent, a length determined by the meter).
 The length of a particular note may be increased or decreased by appending a
  multiplicative factor to the note. For example, if the default note
  length is 1/8 (i.e. an eighth note), then the following sequence of notes
        </p>
        <img height="60" src="length_example.png">
         <p>
          is represented by
         </p>
         <pre><code>A1/4 A/4 A/ A A2 A3 A4 A6 A8| A,1/4 A,/4 A,/ A, A,2 A,3 A,4 A,6 A,8 |]</code></pre>
         <p>
          Note that either the denominator or the numerator (or both) in a fractional
multiplicative factor can be omitted. An absent numerator should be
treated as 1, and an absent denominator as 2. In addition, any
apostrophes or commas that indicate the deviation from the middle
octave must precede the multiplicative factor.
         </p>
        </img>
       </div>
       <h3 id="accidentals">
        Accidentals
       </h3>
       <div data-outline="accidentals">
        <p>
         The effect of the key signature as discussed in
         <a href="#header">
          <em>
           Header
          </em>
         </a>
         (
         <code>
          K
         </code>
         field) can be temporarily overridden using accidentals. An accidental
can be a sharp (denoted by
         <code>
          ^
         </code>
         in abc), a flat (
         <code>
          _
         </code>
         ), or a
natural (
         <code>
          =
         </code>
         ). A sharp causes a note to be played one semitone higher,
a flat one semitone lower, and a natural
causes the note to be played as if the key were in C without any
accidental. Double sharps (
         <code>
          ^^
         </code>
         ) and flats (
         <code>
          __
         </code>
         ) are also allowed.
An accidental only affects a single octave; for example, the accidental
in the bar
         <code>
          |^C D c C|
         </code>
         would only affect the first and the last C
notes of the bar.
        </p>
        <p>
         The effect of an accidental on a note lasts through the remainder
of the current bar, and can be overridden by another accidental that
occurs in the same bar. The effect of the key signature is restored at the
beginning of the next bar.
        </p>
       </div>
       <h3 id="rests">
        Rests
       </h3>
       <div data-outline="rests">
        <p>
         A rest is denoted by
        </p>
        <pre><code>z</code></pre>
        <p>
         and has the same default length as a note. Multiplicative factors have
the same effect on rests as they do on notes, but accidentals cannot
be applied to rests.
        </p>
       </div>
       <h3 id="chords">
        Chords
       </h3>
       <div data-outline="chords">
        <p>
         One or more notes may be played simultaneously in a chord. In abc, a chord is
denoted by a group of notes between square brackets (
         <code>
          [
         </code>
         and
         <code>
          ]
         </code>
         ):
        </p>
        <pre><code>[CEG]</code></pre>
        <p>
         Notes within a chord may be embellished with an accidental or a multiplicative
factor. If the notes in a chord have different durations, the duration of the
chord is determined by the duration of the first note specified in the chord.
For example, in
         <code>
          [C2E4]G2
         </code>
         , there would first be an E note and a C note playing together,
and then an E note and a G note playing together.
        </p>
        <p>
         A chord may not contain any rests or tuplets.
        </p>
       </div>
       <h3 id="tuplets">
        Tuplets
       </h3>
       <div data-outline="tuplets">
        <div style="margin: 1em; float: right; text-align: center;">
         <img src="triplet.png" width="70"/>
        </div>
        <p>
         A tuplet is a consecutive group of notes that are to be played for a duration
that is either greater or less than the sum of the individual notes within that
group. In abc, a tuplet is denoted by an opening round bracket
         <code>
          (
         </code>
         , the tuplet
number, and the actual notes in the tuplet. For example,
        </p>
        <pre><code>(3GAB</code></pre>
        <p>
         is a tuplet that consists of three notes, and
called
         <em>
          triplet
         </em>
         .
        </p>
        <p>
         In this project, we require you to handle
         <strong>
          ONLY
         </strong>
         duplets, triplets,
and quadruplets. The duration of each type of the tuplets are as follows:
        </p>
        <ul>
         <li>
          Duplet: 2 notes in the time of 3 notes
         </li>
         <li>
          Triplet: 3 notes in the time of 2 notes
         </li>
         <li>
          Quadruplet: 4 notes in the time of 3 notes
         </li>
        </ul>
        <p>
         For example, a triplet that contains three eighth notes is equal
in duration to one quarter note; therefore, each eighth note in the
triplet should be played 2/3 the duration of a standard eighth note.
        </p>
        <p>
         A tuplet may not contain rests, but it may contain chords.
        </p>
        <p>
         A tuplet may have notes and chords of different lengths. In the case of a
triplet, you should play each note or chord for 2/3 of the original duration.
For a duplet, 3/2 of the original durations. And for a quadruplet, 3/4 of the
original durations.
        </p>
       </div>
       <h3 id="repeats">
        Repeats
       </h3>
       <div data-outline="repeats">
        <p>
         A section of music that is enclosed within
         <code>
          |:
         </code>
         and
         <code>
          :|
         </code>
         is to be
repeated once. For example, in the following fragment of abc,
        </p>
        <pre><code>|: C D E F | G A B c :|</code></pre>
        <p>
         the two bars are repeated, so the sequence of notes that your abc
player should produce as output is:
        </p>
        <pre><code>C D E F G A B c C D E F G A B c</code></pre>
        <p>
         The begin repeat bar
         <code>
          |:
         </code>
         may be omitted; in this case, the repeat is 
from the beginning of a major section (i.e. the bar that immediately follows
         <code>
          |]
         </code>
         ), 
or the beginning of the musical piece.
        </p>
        <p>
         A repeated section may have a different ending when it is
played the second time. In abc, alternate endings are indicated using
         <code>
          [1
         </code>
         and
         <code>
          [2
         </code>
         . For example,
        </p>
        <pre><code>|: C D E F |[1 G A B c | G A B B :|[2 F E D C |</code></pre>
        <p>
         should be played as
        </p>
        <pre><code>C D E F G A B c G A B B C D E F F E D C</code></pre>
        <p>
         Note that when the repeat is played the second time, the bar that
begins with
         <code>
          [1
         </code>
         is entirely skipped over. Also note that endings may
span multiple bars and need not be the same length.
        </p>
       </div>
      </div>
      <h2 id="multiple_voices">
       Multiple Voices
      </h2>
      <div data-outline="multiple_voices">
       <p>
        All of the abc constructs that we have discussed so far allow
us to play only a single melodic line. Many pieces of music
(e.g. orchestral or band music), however,
involve multiple
        <code>
         voices
        </code>
        that are played
simultaneously. Multiple voices do not belong to the official abc language
definition, but have nevertheless become a part of the
        <em>
         de facto
        </em>
        standard among abc users.
       </p>
       <p>
        Your abc player should be able to parse and play multiple voices as 
defined below. Your abc player is
        <strong>
         NOT
        </strong>
        required to be able to play
different instruments or have varied timbres.
       </p>
       <p>
        Voices are listed in the header of an abc file using one or more
field lines that begin with
        <code>
         V
        </code>
        . The content of each voice field is
the identifier for a particular voice, and can be an arbitrary
string. For example, the header
       </p>
       <pre><code>X:0
T: Prelude No. 1
C: J. S. Bach
M:4/4
L:1/16
Q:1/4=100
V: upper
V: middle
V: lower
K:C</code></pre>
       <p>
        says that this piece of music contains three different voices,
labeled
        <code>
         upper
        </code>
        ,
        <code>
         middle
        </code>
        , and
        <code>
         lower
        </code>
        . There is no limit on the
number of voices in a piece.
       </p>
       <p>
        A
        <code>
         V
        </code>
        field line may re-appear in the middle of the body to indicate
that the following sequence of notes belongs to a particular voice,
until another voice field with a different identifier
appears. For increased readability, middle-of-body voice fields 
are often placed between 
small sequences of bars for 
different voices in alternating fashion (as it is normally done in
sheet music):
       </p>
       <pre><code>V: upper
z2 Gc eGce z2 Gc eGce | z2 Ad fAdf z2 Ad fAdf | 
V: middle
z E7 z E7 | z D7 z D7 |
V: lower
C8 C8 | C8 C8 |
V: upper
z2 Gd fGdf z2 Gd fGdf | z2 Ae aAea z2 Ae aAea |]
V: middle
z D7 z D7 | z E7 z E7 |]
V: lower
B,8 B,8 | C8 C8 |]</code></pre>
       <p>
        However, your abc player should not make any assumptions about 
the order or frequency of
middle-of-body voice fields. For example, instead of interleaving
voices as in the previous example, an abc author could write each voice in its
entirety under a single middle-of-body voice field:
       </p>
       <pre><code>V: upper
z2 Gc eGce z2 Gc eGce | z2 Ad fAdf z2 Ad fAdf | z2 Gd fGdf z2 Gd fGdf | z2 Ae aAea z2 Ae aAea |]
V: middle
z E7 z E7 | z D7 z D7 | z D7 z D7 | z E7 z E7 |]
V: lower
C8 C8 | C8 C8 | B,8 B,8 | C8 C8 |]</code></pre>
       <p>
        The names or labels of the voices might indicate different instruments, for example. However, they have no significance for your music player because you do not need to play different instruments or have varied timbres
Your music player only needs to produce one kind of sound, and voices simply allow your player to play multiple melodic lines simultaneously.
       </p>
      </div>
     </div>
    </div>
   </div>
  </main>
  <footer>
   MIT EECS
  </footer>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js" type="text/javascript">
  </script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" type="text/javascript">
  </script>
  <script src="../../../web/handout-run.js" type="text/javascript">
  </script>
 </body>

<!-- Mirrored from ocw.mit.edu/ans7870/6/6.005/s16/projects/abcplayer/spec/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Dec 2025 10:37:27 GMT -->
</html>
<!-- Handout delivered Mon Apr 25 2016 14:23:06 GMT-0400 (EDT) -->
